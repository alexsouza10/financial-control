import{I as $,d as E,k as C,F as b,z as y,J as N,K as S,D as l,C as e,G as k,E as v,B as g,L as I,M as R,N as M,r as p,y as F,O as i,P as x,Q as _,R as L,S as P,T as G,U as h,W as D,H as j,o as z,A as J,V as O}from"./Huq7e7DO.js";import{E as A,f as B,_ as Q,a as H}from"./A9hSWeUb.js";const U=$("expenses",{state:()=>({expenses:[],salary:3e3}),actions:{addExpense(a){const t={id:crypto.randomUUID(),...a};this.expenses.push(t),this.saveExpenses()},removeExpense(a){this.expenses=this.expenses.filter(t=>t.id!==a),this.saveExpenses()},async fetchExpenses(){const a=localStorage.getItem("finance-data");if(a){const t=JSON.parse(a);this.expenses=t.expenses||[],this.salary=t.salary??3e3}},saveExpenses(){const a={expenses:this.expenses,salary:this.salary};localStorage.setItem("finance-data",JSON.stringify(a))},setSalary(a){this.salary=a,this.saveExpenses()}},getters:{totalExpenses(a){return a.expenses.reduce((t,n)=>t+n.amount,0)},averageExpense(){return this.expenses.length===0?0:this.totalExpenses/this.expenses.length},expensesByMonth(a){const t={};return a.expenses.forEach(n=>{const r=n.date.substring(0,7);t[r]||(t[r]=[]),t[r].push(n)}),t}}}),V=E({__name:"ExpenseCard",props:{icon:{type:String,required:!0},title:{type:String,required:!0},value:{type:Number,required:!0},color:{type:String,required:!0},editable:{type:Boolean,default:!1},editIcon:{type:String,default:""},editTitle:{type:String,default:"Editar"},customClass:{type:String,default:""}},setup(a){const t=a,n=C(()=>t.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})),r=C(()=>t.title.toLowerCase()==="sobra"?t.value>=0?"text-teal darken-2":"text-red darken-2":`text-${t.color.replace(/\s+/g,"-")}`);return(u,d)=>(y(),b(N,{outlined:"",class:S(["pa-4 text-center",a.customClass])},{default:l(()=>[e(k,{size:60,color:a.color,class:"mb-2"},{default:l(()=>[v(g(a.icon),1)]),_:1},8,["color"]),e(I,{class:S(["text-h5 font-weight-bold",{"d-flex align-center justify-center":!!a.editIcon}])},{default:l(()=>[v(g(a.title)+" ",1),a.editIcon?(y(),b(k,{key:0,small:"",class:"ml-2 cursor-pointer",color:a.color,onClick:d[0]||(d[0]=c=>u.$emit("edit-click")),title:a.editTitle},{default:l(()=>[v(g(a.editIcon),1)]),_:1},8,["color","title"])):R("",!0)]),_:1},8,["class"]),e(M,{class:S(["text-h4 font-weight-bold",r.value])},{default:l(()=>[v(g(n.value),1)]),_:1},8,["class"])]),_:1},8,["class"]))}}),K=E({__name:"ExpenseSummary",setup(a){const t=U(),n=p(!1),r=C(()=>t.salary-t.totalExpenses);function u(){n.value=!0}function d(c){c>=0&&t.setSalary(c),n.value=!1}return(c,m)=>(y(),F(L,null,[e(_,{class:"mb-6",justify:"center",align:"center",dense:""},{default:l(()=>[e(i,{cols:"12",md:"4"},{default:l(()=>[e(V,{icon:"mdi-cash-multiple",title:"Total",value:x(t).totalExpenses,color:"green darken-2"},null,8,["value"])]),_:1}),e(i,{cols:"12",md:"4"},{default:l(()=>[e(V,{icon:"mdi-calculator",title:"Média",value:x(t).averageExpense,color:"blue darken-2"},null,8,["value"])]),_:1}),e(i,{cols:"12",md:"4"},{default:l(()=>[e(V,{icon:"mdi-wallet",title:"Salário",value:x(t).salary,color:"orange darken-2","edit-icon":"mdi-pencil","edit-title":"Editar salário",onEditClick:u},null,8,["value"])]),_:1})]),_:1}),e(_,{justify:"center",align:"center",dense:"",class:"mb-6"},{default:l(()=>[e(i,{cols:"12",md:"4"},{default:l(()=>[e(V,{icon:"mdi-cash-check",title:"Sobra",value:r.value,color:"teal darken-2"},null,8,["value"])]),_:1})]),_:1}),e(A,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=f=>n.value=f),value:x(t).salary,title:"Editar Salário",label:"Novo salário",min:0,suffix:"R$","confirm-color":"orange darken-2","onUpdate:value":d},null,8,["modelValue","value"])],64))}}),W=E({__name:"ExpenseForm",emits:["add"],setup(a,{emit:t}){const n=t,r=p(""),u=p(0),d=p(""),c=p(1),m=p(""),f=p(B(new Date)),q=["Cartão de Crédito","Débito","Dinheiro","Pix","Boleto"],w=["Nubank","Banco Inter","Santander","Bradesco","Itaú"],T=()=>{if(!r.value||u.value<=0||!d.value||c.value<1||!m.value){alert("Por favor, preencha todos os campos corretamente.");return}n("add",{category:r.value,amount:u.value,paymentMethod:d.value,installments:c.value,card:m.value,date:f.value}),r.value="",u.value=0,d.value="",c.value=1,m.value="",f.value=B(new Date)};return(Y,o)=>(y(),b(N,{class:"pa-4 mb-6 elevation-3"},{default:l(()=>[e(I,{class:"text-h6"},{default:l(()=>o[6]||(o[6]=[v(" Registrar Novo Gasto ")])),_:1,__:[6]}),e(M,null,{default:l(()=>[e(P,{onSubmit:G(T,["prevent"]),ref:"formRef"},{default:l(()=>[e(_,null,{default:l(()=>[e(i,{cols:"12",md:"6"},{default:l(()=>[e(h,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=s=>r.value=s),label:"Categoria",outlined:"",dense:"",clearable:"",rules:[s=>!!s||"Categoria é obrigatória"],required:""},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12",md:"6"},{default:l(()=>[e(h,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=s=>u.value=s),modelModifiers:{number:!0},label:"Valor Total (R$)",type:"number",min:"0.01",outlined:"",dense:"",clearable:"",rules:[s=>s>0||"Valor deve ser positivo"],required:""},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12",md:"6"},{default:l(()=>[e(D,{modelValue:d.value,"onUpdate:modelValue":o[2]||(o[2]=s=>d.value=s),items:q,label:"Método de Pagamento",outlined:"",dense:"",clearable:"",rules:[s=>!!s||"Escolha um método"],required:""},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12",md:"6"},{default:l(()=>[e(h,{modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=s=>c.value=s),modelModifiers:{number:!0},label:"Quantidade de Parcelas",type:"number",min:"1",outlined:"",dense:"",clearable:"",rules:[s=>s>=1||"Deve ter ao menos 1 parcela"],required:""},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12",md:"6"},{default:l(()=>[e(D,{modelValue:m.value,"onUpdate:modelValue":o[4]||(o[4]=s=>m.value=s),items:w,label:"Cartão",outlined:"",dense:"",clearable:"",rules:[s=>!!s||"Selecione um cartão"],required:""},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12",md:"6"},{default:l(()=>[e(Q,{modelValue:f.value,"onUpdate:modelValue":o[5]||(o[5]=s=>f.value=s),label:"Data",class:"mt-0"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",class:"text-right"},{default:l(()=>[e(j,{color:"primary",type:"submit"},{default:l(()=>o[7]||(o[7]=[v(" Salvar Gasto ")])),_:1,__:[7]})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1}))}}),ee=E({__name:"expenses",setup(a){const t=U();function n(u){t.addExpense(u)}function r(u){t.removeExpense(u)}return z(()=>{t.fetchExpenses()}),(u,d)=>(y(),b(O,{class:"py-2"},{default:l(()=>[d[0]||(d[0]=J("h1",{class:"text-h4 mb-6 text-center"},"Controle de Gastos",-1)),e(K),e(W,{onAdd:n}),e(H,{expenses:x(t).expenses,onDelete:r},null,8,["expenses"])]),_:1,__:[0]}))}});export{ee as default};
